jQuery(document).ready(function(){function e(e,t,i,a){let r={action:"mo_ajax_register",mo_action:"validate",otp:t,nonce:u,txid:e};m.post(l,r,function(e){"SUCCESS"==e.status?("email"==i?(y=!0,a||n()):"phone"==i&&(j=!0,a||n()),a&&y&&j&&n()):(jQuery("<p class='rc-error rcp-error'><span>Please enter valid OTP</span></p>").insertBefore("#miniorange_submit"),jQuery("#loading").css("display","none"),jQuery("#miniorange_submit").prop("disabled",!1))})}function t(e){let t=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i;return!!t.test(e)}function i(e){let t=/[0-9 -()+]+$/;return!(e.length<10||0==e.length||!t.test(e))}function a(){jQuery(d).removeAttr("action"),jQuery(d).removeAttr("method"),/^#/.test(p)?(jQuery(p).attr("name","miniorange_submit"),jQuery('input[name="miniorange_submit"]').attr("id","miniorange_submit")):(jQuery(p).attr("id","miniorange_submit"),jQuery("#miniorange_submit").attr("name","miniorange_submit"))}function n(){v=!0,jQuery("#loading").css("display","none"),jQuery("#miniorange_submit").prop("disabled",!1),jQuery(d).attr("action",h),jQuery(d).attr("method",x),jQuery("#miniorange_submit").attr("name",E),jQuery('input[name="'+E+'"').removeAttr("id"),jQuery('input[name="'+E+'"').attr("id",P),jQuery(p).click()}function r(e){jQuery("#loaderMsg").empty(),jQuery("#loaderMsg").append(e)}function o(){0===timeLeftEmail?(clearTimeout(timerIdEmail),m("#mo2f_send_ajax_email").css("display","block"),m("#mo2ftimerEmail").css("display","none"),m("#mo2f_send_ajax_email").text("Resend OTP"),m("#mo2f_send_ajax_email").attr("disabled",!1)):(m("#mo2ftimerEmail").css("display","block"),m("#mo2f_send_ajax_email").css("display","none"),m("#mo2ftimerEmail").text(timeLeftEmail),timeLeftEmail--)}function s(){0===timeLeftSMS?(clearTimeout(timerIdSMS),m("#mo2f_send_ajax_sms").css("display","block"),m("#mo2ftimerSMS").css("display","none"),m("#mo2f_send_ajax_sms").text("Resend OTP"),m("#mo2f_send_ajax_sms").attr("disabled",!1)):(m("#mo2ftimerSMS").css("display","block"),m("#mo2f_send_ajax_sms").css("display","none"),m("#mo2ftimerSMS").text(timeLeftSMS),timeLeftSMS--)}let m=jQuery,l=otpverificationObj.siteURL,u=otpverificationObj.nonce,p=otpverificationObj.submitSelector,d=otpverificationObj.formname,_=otpverificationObj.emailselector,c=otpverificationObj.phoneSelector,f=otpverificationObj.loaderUrl,y=!1,j=!1,b="",Q="",v=!1,g=!1,S=otpverificationObj.authType,h=(otpverificationObj.isEnabledShortcode,jQuery(d).attr("action")),x=jQuery(d).attr("method"),E=jQuery(p).attr("name"),P=jQuery(p).attr("id");const O='<label for="mo2f_reg_email">OTP Over Email&nbsp;<span class="required">*</span></label> <input type="text" name="mo2f_email_otp" id="mo2f_email_otp" placeholder="Enter OTP sent on email" />',M='<label for="mo2f_reg_sms">OTP Over SMS&nbsp;<span class="required">*</span></label> <input type="text" name="mo2f_phone_otp" id="mo2f_phone_otp" placeholder="Enter OTP sent on phone number" />';switch(S="email",S){case"phone":jQuery(c).wrap("<div class='buttonInsidePhone'></div>"),jQuery(c).after('<button class="mo2f_send_phoneotp_button" id="mo2f_send_ajax_sms">Send OTP</button><button class="mo2ftimerSMS" id ="mo2ftimerSMS" style="display:none;">00</button>'),a();break;case"email":jQuery(_).wrap("<div class='buttonInsideEmail'></div>"),jQuery(_).after('<button class="mo2f_send_emailotp_button" id="mo2f_send_ajax_email">Send OTP</button><button class="mo2ftimerEmail"  id ="mo2ftimerEmail" style="display:none;">00</button>'),a();break;case"both":g=!0,jQuery(c).wrap("<div class='buttonInsidePhone'></div>"),jQuery(c).after('<button class="mo2f_send_phoneotp_button" id="mo2f_send_ajax_sms">Send OTP</button><button class="mo2ftimerSMS" id ="mo2ftimerSMS" style="display:none;">00</button>'),jQuery(_).wrap("<div class='buttonInsideEmail'></div>"),jQuery(_).after('<button class="mo2f_send_emailotp_button" id="mo2f_send_ajax_email">Send OTP</button><button class="mo2ftimerEmail" id ="mo2ftimerEmail" style="display:none;">00</button>'),a()}jQuery("#mo2ftimerSMS").click(function(e){e.preventDefault()}),jQuery("#mo2ftimerEmail").click(function(e){e.preventDefault()}),jQuery("#mo2f_send_ajax_email").click(function(e){e.preventDefault();var i=jQuery(_).val();if(t(i)){jQuery("#mo2f_send_ajax_email").html("Sending");let e={action:"mo_ajax_register",mo_action:"send_otp_over_email",email:i,nonce:u,authTypeSend:"email"};m.post(l,e,function(e){"SUCCESS"==e.status?(b=e.txid,timeLeftEmail=30,timerIdEmail=setInterval(o,1e3),jQuery("#mo2f_send_ajax_email").attr("disabled",!0),void 0===jQuery("#mo2f_email_otp").val()&&jQuery(".buttonInsideEmail").after(O)):"ERROR"==e.status&&jQuery("<p class='rc-error rcp-error'><span>"+e.message+"</span></p>").insertBefore("#miniorange_submit")})}else jQuery("<p class='rc-error rcp-error'><span>Please enter valid email address</span></p>").insertBefore("#miniorange_submit")}),jQuery("#mo2f_send_ajax_sms").click(function(e){e.preventDefault();var t=jQuery(c).val();if(i(t)){jQuery("#mo2f_send_ajax_sms").html("Sending");let e={action:"mo_ajax_register",mo_action:"send_otp_over_sms",phone:t,nonce:u,authTypeSend:"phone"};m.post(l,e,function(e){"SUCCESS"==e.status?(Q=e.txid,timeLeftSMS=30,timerIdSMS=setInterval(s,1e3),jQuery("#mo2f_send_ajax_sms").attr("disabled",!0),jQuery(".buttonInsidePhone").after(M)):"ERROR"==e.status&&jQuery("<p class='rc-error rcp-error'><span>"+e.message+"</span></p>").insertBefore("#miniorange_submit")})}else jQuery("<p class='rc-error rcp-error'><span>Please enter valid phone number</span></p>").insertBefore("#miniorange_submit")}),jQuery("#miniorange_submit").click(function(t){if(t.preventDefault(),!v)switch(jQuery("#miniorange_submit").after("<div id='loading' ><div id='loaderMsg'></div><div><img src='"+f+"' alt='' /></div></div>"),jQuery("#miniorange_submit").prop("disabled",!0),S){case"email":y?n():(otp=jQuery("#mo2f_email_otp").val(),"undefined"!=typeof otp?(r("Validating Email"),e(b,otp,"email",g)):(jQuery("<p class='rc-error rcp-error'><span>Please validate Email</span></p>").insertBefore("#miniorange_submit"),jQuery("#loading").css("display","none"),jQuery("#miniorange_submit").prop("disabled",!1)));break;case"phone":j?n():(otp=jQuery("#mo2f_phone_otp").val(),"undefined"!=typeof otp?(r("Validating Phone"),e(Q,otp,"phone",g)):(jQuery("<p class='rc-error rcp-error'><span>Please validate Phone</span></p>").insertBefore("#miniorange_submit"),jQuery("#loading").css("display","none"),jQuery("#miniorange_submit").prop("disabled",!1)));break;default:y&&j?n():(y||(otp=jQuery("#mo2f_email_otp").val()),"undefined"!=typeof otp?(r("Validating Email"),e(b,otp,"email",g)):(jQuery("<p class='rc-error rcp-error'><span>Please validate Email</span></p>").insertBefore("#miniorange_submit"),jQuery("#loading").css("display","none"),jQuery("#miniorange_submit").prop("disabled",!1)),j||(otp=jQuery("#mo2f_phone_otp").val(),"undefined"!=typeof otp?(r("Validating Phone"),e(Q,otp,"phone",g)):(jQuery("<p class='rc-error rcp-error'><span>Please validate Phone</span></p>").insertBefore("#miniorange_submit"),jQuery("#loading").css("display","none"),jQuery("#miniorange_submit").prop("disabled",!1))))}})});