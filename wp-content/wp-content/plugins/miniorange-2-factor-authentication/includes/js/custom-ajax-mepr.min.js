jQuery(document).ready(function(){function e(e,t,a,i){let r={action:"mo_ajax_register",mo_action:"validate",otp:t,nonce:d,txid:e};m.post(l,r,function(e){"SUCCESS"==e.status?("email"==a?(c=!0,i||o()):"phone"==a&&(j=!0,i||o()),i&&c&&j&&o()):(jQuery("#mo2f_error").empty(),jQuery(".buttonInsideEmail").after("<p class='mepr-form-has-errors' style='display:block;'><span id='mo2f_error'>Please enter valid OTP</span></p>"),jQuery("#loading").css("display","none"),jQuery("#miniorange_submit").prop("disabled",!1))})}function t(e){let t=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i;return!!t.test(e)}function a(e){let t=/[0-9 -()+]+$/;return!(e.length<10||0==e.length||!t.test(e))}function i(){jQuery(u).removeAttr("action"),jQuery(u).removeAttr("method"),/^#/.test(p)?(jQuery(p).attr("name","miniorange_submit"),jQuery('input[name="miniorange_submit"]').attr("id","miniorange_submit")):(jQuery(p).attr("id","miniorange_submit"),jQuery("#miniorange_submit").attr("name","miniorange_submit")),jQuery("#miniorange_submit").removeAttr("class")}function o(){v=!0,jQuery("#loading").css("display","none"),jQuery("#miniorange_submit").prop("disabled",!1),jQuery(u).attr("action",g),jQuery(u).attr("method",E),jQuery("#miniorange_submit").attr("class",P),jQuery("."+P).removeAttr("id"),jQuery("."+P).attr("id",x),jQuery(p).click()}function r(e){jQuery("#loaderMsg").empty(),jQuery("#loaderMsg").append(e)}function n(){0===timeLeftEmail?(clearTimeout(timerIdEmail),m("#mo2f_send_ajax_email").css("display","block"),m("#mo2ftimerEmail").css("display","none"),m("#mo2f_send_ajax_email").text("Resend OTP"),m("#mo2f_send_ajax_email").attr("disabled",!1)):(m("#mo2ftimerEmail").css("display","block"),m("#mo2f_send_ajax_email").css("display","none"),m("#mo2ftimerEmail").text(timeLeftEmail),timeLeftEmail--)}function s(){0===timeLeftSMS?(clearTimeout(timerIdSMS),m("#mo2f_send_ajax_sms").css("display","block"),m("#mo2ftimerSMS").css("display","none"),m("#mo2f_send_ajax_sms").text("Resend OTP"),m("#mo2f_send_ajax_sms").attr("disabled",!1)):(m("#mo2ftimerSMS").css("display","block"),m("#mo2f_send_ajax_sms").css("display","none"),m("#mo2ftimerSMS").text(timeLeftSMS),timeLeftSMS--)}let m=jQuery,l=otpverificationObj.siteURL,d=otpverificationObj.nonce,p=otpverificationObj.submitSelector,u=otpverificationObj.formname,f=otpverificationObj.emailselector,y=otpverificationObj.phoneSelector,_=otpverificationObj.loaderUrl,c=!1,j=!1,b="",Q="",v=!1,h=!1,S=otpverificationObj.authType,g=(otpverificationObj.isEnabledShortcode,jQuery(u).attr("action")),E=jQuery(u).attr("method"),x=(jQuery(p).attr("name"),jQuery(p).attr("id")),P=jQuery(p).attr("class");const O='<label for="mo2f_reg_email">OTP Over Email&nbsp;<span class="required">*</span></label> <input type="text" name="mo2f_email_otp" id="mo2f_email_otp" placeholder="Enter OTP sent on email" />',k='<label for="mo2f_reg_sms">OTP Over SMS&nbsp;<span class="required">*</span></label> <input type="text" name="mo2f_phone_otp" id="mo2f_phone_otp" placeholder="Enter OTP sent on phone number" />';switch(S){case"phone":jQuery(".iti").wrap("<div class='buttonInsidePhone'></div>"),jQuery(".iti").after('<button class="mo2f_send_phoneotp_button" id="mo2f_send_ajax_sms">Send OTP</button><button class="mo2ftimerSMS" id ="mo2ftimerSMS" style="display:none;">00</button>'),i();break;case"email":jQuery(f).wrap("<div class='buttonInsideEmail'></div>"),jQuery(f).after('<button class="mo2f_send_emailotp_button" id="mo2f_send_ajax_email">Send OTP</button><button class="mo2ftimerEmail"  id ="mo2ftimerEmail" style="display:none;">00</button>'),i();break;case"both":h=!0,jQuery(".iti").wrap("<div class='buttonInsidePhone'></div>"),jQuery(".iti").after('<button class="mo2f_send_phoneotp_button" id="mo2f_send_ajax_sms">Send OTP</button><button class="mo2ftimerSMS" id ="mo2ftimerSMS" style="display:none;">00</button>'),jQuery(f).wrap("<div class='buttonInsideEmail'></div>"),jQuery(f).after('<button class="mo2f_send_emailotp_button" id="mo2f_send_ajax_email">Send OTP</button><button class="mo2ftimerEmail" id ="mo2ftimerEmail" style="display:none;">00</button>'),i()}jQuery("#mo2ftimerSMS").click(function(e){e.preventDefault()}),jQuery("#mo2ftimerEmail").click(function(e){e.preventDefault()}),jQuery("#mo2f_send_ajax_email").click(function(e){e.preventDefault();var a=jQuery(f).val();if(t(a)){jQuery("#mo2f_send_ajax_email").html("Sending");let e={action:"mo_ajax_register",mo_action:"send_otp_over_email",email:a,nonce:d,authTypeSend:"email"};m.post(l,e,function(e){"SUCCESS"==e.status?(b=e.txid,timeLeftEmail=30,timerIdEmail=setInterval(n,1e3),jQuery("#mo2f_send_ajax_email").attr("disabled",!0),void 0===jQuery("#mo2f_email_otp").val()&&jQuery(".buttonInsideEmail").after(O)):"ERROR"==e.status&&(jQuery("#mo2f_error").empty(),jQuery(".buttonInsideEmail").after("<p class='mepr-form-has-errors' style='display:block;'><span id='mo2f_error'>"+e.message+"</span></p>"))})}else jQuery("#mo2f_error").empty(),jQuery(".buttonInsideEmail").after("<p class='mepr-form-has-errors' style='display:block;'><span id='mo2f_error'>Please enter valid email address</span></p>")}),jQuery("#mo2f_send_ajax_sms").click(function(e){e.preventDefault();var t=jQuery(y).val(),i=iti.getSelectedCountryData().dialCode;if(t="+"+i+t,a(t)){jQuery("#mo2f_send_ajax_sms").html("Sending");let e={action:"mo_ajax_register",mo_action:"send_otp_over_sms",phone:t,nonce:d,authTypeSend:"phone"};m.post(l,e,function(e){"SUCCESS"==e.status?(Q=e.txid,timeLeftSMS=30,timerIdSMS=setInterval(s,1e3),jQuery("#mo2f_send_ajax_sms").attr("disabled",!0),void 0===jQuery("#mo2f_phone_otp").val()&&jQuery(".buttonInsidePhone").after(k)):"ERROR"==e.status&&(jQuery("#mo2f_error").empty(),jQuery(".buttonInsidePhone").after("<p class='mepr-form-has-errors' style='display:block;'><span id='mo2f_error'>"+e.message+"</span></p>"))})}else jQuery("#mo2f_error").empty(),jQuery(".buttonInsidePhone").after("<p class='mepr-form-has-errors' style='display:block;'><span id='mo2f_error'>Please enter valid phone number</span></p>")}),jQuery("#miniorange_submit").click(function(t){if(t.preventDefault(),!v)switch(jQuery("#miniorange_submit").after("<div id='loading' ><div id='loaderMsg'></div><div><img src='"+_+"' alt='' /></div></div>"),jQuery("#miniorange_submit").prop("disabled",!0),S){case"email":c?o():(otp=jQuery("#mo2f_email_otp").val(),"undefined"!=typeof otp?(r("Validating Email"),e(b,otp,"email",h)):(jQuery("#mo2f_error").empty(),jQuery(".buttonInsideEmail").after("<p class='mepr-form-has-errors' style='display:block;'><span id='mo2f_error'>Please validate Email</span></p>"),jQuery("#loading").css("display","none"),jQuery("#miniorange_submit").prop("disabled",!1)));break;case"phone":j?o():(otp=jQuery("#mo2f_phone_otp").val(),"undefined"!=typeof otp?(r("Validating Phone"),e(Q,otp,"phone",h)):(jQuery("#mo2f_error").empty(),jQuery(".buttonInsidePhone").after("<p class='mepr-form-has-errors' style='display:block;'><span id='mo2f_error'>Please validate Phone</span></p>"),jQuery("#loading").css("display","none"),jQuery("#miniorange_submit").prop("disabled",!1)));break;default:c&&j?o():(c||(otp=jQuery("#mo2f_email_otp").val()),"undefined"!=typeof otp?(r("Validating Email"),e(b,otp,"email",h)):(jQuery("#mo2f_error").empty(),jQuery(".buttonInsideEmail").after("<p class='mepr-form-has-errors' style='display:block;'><span id='mo2f_error'>Please validate Email</span></p>"),jQuery("#loading").css("display","none"),jQuery("#miniorange_submit").prop("disabled",!1)),j||(otp=jQuery("#mo2f_phone_otp").val(),"undefined"!=typeof otp?(r("Validating Phone"),e(Q,otp,"phone",h)):(jQuery("#mo2f_error").empty(),jQuery(".buttonInsidePhone").after("<p class='mepr-form-has-errors' style='display:block;'><span id='mo2f_error'>Please validate Phone</span></p>"),jQuery("#loading").css("display","none"),jQuery("#miniorange_submit").prop("disabled",!1))))}})});